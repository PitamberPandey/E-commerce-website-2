<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{base::layout(~{::section})}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Products</title>
</head>
<body>
  <section>
    <div class="container-fluid mt-5 p-5">
      <div class="card card-sh">
        <div class="card-header text-center">
            <p class="fs-4">View Products</p>
            <th:block th:if="${session.successMsg}">
                            <p class="text-success fw-bold" th:text="${session.successMsg}"></p>
                            <th:block th:text="${@commonServiceImpl.removeSessionMessage()}"></th:block>
                        </th:block>

                        <!-- Block for Error Message -->
                        <th:block th:if="${session.errorMsg}">
                            <p class="text-danger fw-bold" th:text="${session.errorMsg}"></p>
                            <th:block th:text="${@commonServiceImpl.removeSessionMessage()}"></th:block>
                        </th:block>
        </div>
        <div class="card-body">
            <table class="table">
                <thead>
                  <tr>
                    <th scope="col">S1 No</th>
                    <th scope="col">Image</th>
                    <th scope="col">Title</th>
                    <th scope="col">Category</th>
                    <th scope="col">Price</th>
                    <th scope="col">Discount</th>
                    <th scope="col">Discount Price</th>
                    <th scope="col">Status</th>
                    <th scope="col">Stock</th>
                    <th scope="col">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr th:each="p, c : ${products}">
                    <th scope="row">[[${c.index + 1}]]</th>
                    <td><img th:src="@{'/image/Image/' + ${p.image}}" width="50px" height="100px"></td>
                    <td>[[${p.title}]]</td>
                    <td>[[${p.category}]]</td>
                    <td>[[${p.price}]]</td>
                    <td>[[${p.discount}]]</td>
                    <td>[[${p.discountAmount}]]</td>
                    <td>[[${p.isActive}]]</td>
                    <td>[[${p.stock}]]</td>
                    <td>
                      <a th:href="@{/admin/loadEditProduct/{id}(id=${p.id})}" class="btn btn-primary">
                        <i class="fa-solid fa-pen-to-square"></i> Edit</a>
                        <a th:href="@{/admin/deleteProduct/{id}(id=${p.id})}" 
                         class="btn btn-sm btn-danger"><i class="fa-solid fa-trash"></i> Delete</a>
                    </td>
                  </tr>
                </tbody>
              </table>
        </div>
      </div>
    </div>
    <div class="container-fluid p-1 bg-primary text-center text-white" style="margin-top: 250px;">
        <p>ecom.com.np</p>
      
    </div>
  </section>  
</body>
</html>
